# TEST 4.5: "–ñ–∏–≤–æ–π" –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)

## –û–ø–∏—Å–∞–Ω–∏–µ

–†—É—á–Ω–æ–π —Ç–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤: –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ (–∏–ª–∏ –µ–≥–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏) —Å–∏—Å—Ç–µ–º–∞ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É** –∏ **–ø–æ–º–µ—á–∞–µ—Ç —Ç–æ–≤–∞—Ä –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π** –≤ UI.

## DoD (Definition of Done)

‚úÖ **–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –µ–≥–æ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–ª–∞—à–∫–∞ "–¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"**

- –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø–∞—Ä—Å–∏–Ω–≥–∞ (—Ç–æ–≤–∞—Ä —É–¥–∞–ª—ë–Ω/–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- –¢–æ–≤–∞—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å–æ–º `status: 'unavailable'`
- –í UI –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∞—Å–Ω–∞—è –ø–ª–∞—à–∫–∞ —Å —Ç–µ–∫—Å—Ç–æ–º "‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
- –ü–ª–∞—à–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏—á–∏–Ω—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞ —É–¥–∞–ª—ë–Ω —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞, –ø–∞—Ä—Å–µ—Ä –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É. –ë–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–æ–π –æ—à–∏–±–∫–∏:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–π–º—ë—Ç, –ø–æ—á–µ–º—É –Ω–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—Ç—Ä–∞—Ç–∏—Ç –≤—Ä–µ–º—è –Ω–∞ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ–º–µ—á–∞–µ–º —Ç–æ–≤–∞—Ä –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ø–ª–∞—à–∫—É –≤ UI.

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend: `server.js`

#### –ú–∞—Ä—à—Ä—É—Ç: `POST /monitoring/check-updates`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `server.js`, —Å—Ç—Ä–æ–∫–∏ 636-730

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:**

```javascript
for (const item of items) {
  try {
    // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
    const freshData = await parseProductByMarketplace(item.productUrl, item.marketplace);
    
    if (!freshData || !freshData.price) {
      logger.warn({ itemId: item.id, url: item.productUrl }, 'Failed to fetch fresh data');
      
      // üß™ TEST 4.5: –ü–æ–º–µ—á–∞–µ–º —Ç–æ–≤–∞—Ä –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π
      if (item.status !== 'unavailable') {
        item.status = 'unavailable';
        item.unavailableSince = new Date().toISOString();
        monitoringRegistry.set(item.id, item);
        
        unavailableItems.push({
          id: item.id,
          title: item.currentTitle || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä',
          url: item.productUrl,
          reason: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ'
        });
        
        logger.warn({ itemId: item.id, url: item.productUrl }, 'Item marked as unavailable');
      }
      
      continue;
    }

    // –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä –±—ã–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
    if (item.status === 'unavailable') {
      item.status = 'active';
      delete item.unavailableSince;
      monitoringRegistry.set(item.id, item);
      logger.info({ itemId: item.id }, 'Item became available again');
    }
    
    // ... (–æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω—ã)
  } catch (error) {
    // –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ - –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π
    logger.error({ itemId: item.id, error: error.message }, 'Parse error');
    // ... (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–º–µ—á–∞–Ω–∏—è –∫–∞–∫ unavailable)
  }
}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:**

```json
{
  "message": "–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 3",
  "checked": 3,
  "updates": [
    {
      "id": "item-123",
      "title": "–¢–æ–≤–∞—Ä A",
      "oldPrice": 2990,
      "newPrice": 2790,
      "change": -200,
      "changePercent": -6.7
    }
  ],
  "unavailable": [
    {
      "id": "item-456",
      "title": "–¢–æ–≤–∞—Ä B (—É–¥–∞–ª—ë–Ω–Ω—ã–π)",
      "url": "https://www.ozon.ru/product/deleted-123",
      "reason": "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ"
    }
  ],
  "unavailableCount": 1
}
```

---

### Frontend: `index.html`

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `index.html`, —Å—Ç—Ä–æ–∫–∏ 619-700

**–õ–æ–≥–∏–∫–∞:**

1. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
   ```javascript
   entry.dataset.status = data.item?.status || 'active';
   ```

2. –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:
   ```javascript
   if (data.unavailable && data.unavailable.length > 0) {
     data.unavailable.forEach(unavail => {
       const card = Array.from(cards).find(c => c.dataset.itemId === unavail.id);
       if (card) {
         card.dataset.status = 'unavailable';
         const statusDiv = card.querySelector('.monitoring-card-status');
         if (statusDiv) {
           statusDiv.innerHTML = `
             <div class="mt-2 p-3 bg-red-900/30 border border-red-700 rounded-lg">
               <p class="text-sm font-semibold text-red-400">‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</p>
               <p class="text-xs text-red-300 mt-1">${escapeHtml(unavail.reason || '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ')}</p>
             </div>
           `;
         }
       }
     });
   }
   ```

3. –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
   ```javascript
   let message = `–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: ${data.checked}`;
   if (data.unavailableCount > 0) {
     message += `\n‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ: ${data.unavailableCount}`;
   }
   monitoringStatus.textContent = message;
   ```

---

## –ö–∞–∫ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–µ—Å—Ç

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```powershell
   node server.js
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ**

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (–ø—Ä—è–º–æ–π —Ç–µ—Å—Ç)

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç–æ–≤–∞—Ä –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ.

#### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"**
2. –í–≤–µ–¥–∏—Ç–µ URL –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞:
   ```
   https://www.ozon.ru/product/deleted-nonexistent-999999999
   ```
3. –í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å: **Ozon**
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"**

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –±–µ–∑ –ø–ª–∞—à–∫–∏ (–ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏)

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞ (5-10 —Å–µ–∫—É–Ω–¥)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

‚úÖ **–ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –∫—Ä–∞—Å–Ω–∞—è –ø–ª–∞—à–∫–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω                  ‚îÇ
‚îÇ –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°—Ç–∞—Ç—É—Å –≤ —à–∞–ø–∫–µ:**
```
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 1
‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ: 1
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–æ–≤–∞—Ä —Å—Ç–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç)

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–æ–≤–∞—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π.

#### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–≤–∞—Ä

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"**
2. –í–≤–µ–¥–∏—Ç–µ URL —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞:
   ```
   https://www.wildberries.ru/catalog/12345678/detail.aspx
   ```
   (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ä–µ–∞–ª—å–Ω—ã–π URL)
3. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"**
4. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"**

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –¢–æ–≤–∞—Ä –¥–æ—Å—Ç—É–ø–µ–Ω, –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- –°—Ç–∞—Ç—É—Å: `active`
- –ü–ª–∞—à–∫–∏ –Ω–µ—Ç

#### –®–∞–≥ 2: –°–∏–º—É–ª–∏—Ä—É–π—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (–µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω)**

```powershell
# –ü–æ–º–µ—Ç–∏—Ç—å —Ç–æ–≤–∞—Ä –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π –≤—Ä—É—á–Ω—É—é
Invoke-RestMethod -Uri "http://localhost:3000/monitoring/test-unavailable" -Method POST -Body (@{ itemId = "item-123" } | ConvertTo-Json) -ContentType "application/json"
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ò–∑–º–µ–Ω–∏—Ç–µ URL –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π**

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   // –ù–∞–π—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ –∏ –∏–∑–º–µ–Ω–∏—Ç—å URL
   const card = document.querySelector('article[data-item-id]');
   const link = card.querySelector('a');
   link.href = 'https://www.wildberries.ru/catalog/99999999/detail.aspx'; // –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–≤–∞—Ä
   ```

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–Ω–æ–≤–∞

1. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

‚úÖ **–ù–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –∫—Ä–∞—Å–Ω–∞—è –ø–ª–∞—à–∫–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω                  ‚îÇ
‚îÇ –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å):**

```
WARN: Failed to fetch fresh data
WARN: Item marked as unavailable
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–≤–∞—Ä —Å–Ω–æ–≤–∞ —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ)

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–æ–≤–∞—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º.

#### –ü—Ä–µ–¥—É—Å–ª–æ–≤–∏–µ

–¢–æ–≤–∞—Ä –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π (–∏–∑ –°—Ü–µ–Ω–∞—Ä–∏—è 2).

#### –®–∞–≥ 1: –í–µ—Ä–Ω–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   const card = document.querySelector('article[data-item-id]');
   const link = card.querySelector('a');
   link.href = 'https://www.wildberries.ru/catalog/12345678/detail.aspx'; // –†–µ–∞–ª—å–Ω—ã–π —Ç–æ–≤–∞—Ä
   ```

#### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. –ù–∞–∂–º–∏—Ç–µ **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"**
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ—Ç–≤–µ—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

‚úÖ **–ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞—à–∫–∞ –∏—Å—á–µ–∑–ª–∞**

‚úÖ **–¢–æ–≤–∞—Ä —Å–Ω–æ–≤–∞ –≤ —Å—Ç–∞—Ç—É—Å–µ `active`**

**–õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:**

```
INFO: Item became available again
```

---

## –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (DoD)

| –ö—Ä–∏—Ç–µ—Ä–∏–π | ‚úÖ/‚ùå | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|------|-------------|
| **1. –ü–ª–∞—à–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è** | ‚òê | "‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ |
| **2. –ü—Ä–∏—á–∏–Ω–∞ —É–∫–∞–∑–∞–Ω–∞** | ‚òê | –¢–µ–∫—Å—Ç "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ" |
| **3. –¶–≤–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω** | ‚òê | –ü–ª–∞—à–∫–∞ –∫—Ä–∞—Å–Ω–∞—è (bg-red-900/30, border-red-700) |
| **4. –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω** | ‚òê | `dataset.status === 'unavailable'` –≤ HTML |
| **5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑–∞–Ω–∞** | ‚òê | "‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ: 1" –≤ —à–∞–ø–∫–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS (–≤—Å–µ 5 –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã) / ‚ùå FAIL (—Ö–æ—Ç—è –±—ã 1 –∫—Ä–∏—Ç–µ—Ä–∏–π –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)

---

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | ‚úÖ/‚ùå | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|------|-------------|
| **6. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** | ‚òê | WARN: "Item marked as unavailable" |
| **7. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** | ‚òê | –ü–ª–∞—à–∫–∞ –∏—Å—á–µ–∑–∞–µ—Ç, –∫–æ–≥–¥–∞ —Ç–æ–≤–∞—Ä —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω |
| **8. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** | ‚òê | `item.unavailableSince` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ ISO-—Ñ–æ—Ä–º–∞—Ç–µ |
| **9. API –æ—Ç–≤–µ—Ç** | ‚òê | `response.unavailable` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ |
| **10. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | ‚òê | –ü–∞—Ä—Å–µ—Ä –Ω–µ –∫—Ä–∞—à–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ |

---

## –ü—Ä–∏–º–µ—Ä—ã

### ‚úÖ –•–æ—Ä–æ—à–æ: –ü–ª–∞—à–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**UI (–∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞):**

```html
<article data-item-id="item-456" data-status="unavailable">
  <div class="flex items-center justify-between text-xs text-gray-500">
    <span>OZON</span>
    <span>08.10.2025, 14:30</span>
  </div>
  <a href="https://www.ozon.ru/product/deleted-123" class="text-indigo-300">
    https://www.ozon.ru/product/deleted-123
  </a>
  <p class="text-gray-300">–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç A (–≥–ª–∞–≤–Ω—ã–π)</p>
  
  <!-- ‚úÖ –ü–ª–∞—à–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ -->
  <div class="monitoring-card-status">
    <div class="mt-2 p-3 bg-red-900/30 border border-red-700 rounded-lg">
      <p class="text-sm font-semibold text-red-400">‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</p>
      <p class="text-xs text-red-300 mt-1">–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ</p>
    </div>
  </div>
</article>
```

**–°—Ç–∞—Ç—É—Å –≤ —à–∞–ø–∫–µ:**

```
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 3
–ò–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω: 1
‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ: 1
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ PASS (DoD –≤—ã–ø–æ–ª–Ω–µ–Ω)

---

### ‚ùå –ü–ª–æ—Ö–æ: –ü–ª–∞—à–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**UI (–∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞):**

```html
<article data-item-id="item-456" data-status="active">
  <!-- ... -->
  <div class="monitoring-card-status"></div> <!-- ‚ùå –ü—É—Å—Ç–æ -->
</article>
```

**–°—Ç–∞—Ç—É—Å –≤ —à–∞–ø–∫–µ:**

```
–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 3
–ò–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω: 0
```
(‚ùå –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü–ª–∞—à–∫–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –°—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω (`active` –≤–º–µ—Å—Ç–æ `unavailable`)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç, —á—Ç–æ —Ç–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ùå FAIL (DoD –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Backend: `monitoringRegistry`

**–¢–æ–≤–∞—Ä –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ (–¥–æ—Å—Ç—É–ø–Ω—ã–π):**

```javascript
{
  id: 'mon-1696780800000-abc123',
  productUrl: 'https://www.ozon.ru/product/123',
  marketplace: 'ozon',
  currentPrice: 2990,
  currentTitle: 'Bluetooth-–∫–æ–ª–æ–Ω–∫–∞ JBL',
  currentRating: 4.7,
  currentReviews: 150,
  notes: '–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç',
  status: 'active', // ‚úÖ
  addedAt: '2025-10-08T10:00:00.000Z',
  history: []
}
```

**–¢–æ–≤–∞—Ä –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π):**

```javascript
{
  id: 'mon-1696780800000-abc123',
  productUrl: 'https://www.ozon.ru/product/deleted-999',
  marketplace: 'ozon',
  currentPrice: 2990,
  currentTitle: '–£–¥–∞–ª—ë–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä',
  notes: '–ë—ã–≤—à–∏–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç',
  status: 'unavailable', // ‚ùå
  unavailableSince: '2025-10-08T12:30:00.000Z', // üïí –í—Ä–µ–º—è –ø–æ–º–µ—Ç–∫–∏
  addedAt: '2025-10-08T10:00:00.000Z',
  history: []
}
```

---

### API Response: `POST /monitoring/check-updates`

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (—Å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏):**

```json
{
  "message": "–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 3",
  "checked": 3,
  "updates": [
    {
      "id": "mon-123",
      "title": "–¢–æ–≤–∞—Ä A",
      "oldPrice": 2990,
      "newPrice": 2790,
      "change": -200,
      "changePercent": -6.7,
      "url": "https://www.ozon.ru/product/123"
    }
  ],
  "unavailable": [
    {
      "id": "mon-456",
      "title": "–¢–æ–≤–∞—Ä B (—É–¥–∞–ª—ë–Ω–Ω—ã–π)",
      "url": "https://www.ozon.ru/product/deleted-999",
      "reason": "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ"
    }
  ],
  "unavailableCount": 1
}
```

---

## –¢–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç:

### `POST /monitoring/test-change`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ–≤–∞—Ä–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è).

**–î–æ–±–∞–≤–∏—Ç—å –≤ `server.js`:**

```javascript
// üß™ TEST 4.5: –¢–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
app.post('/monitoring/test-unavailable', asyncHandler(async (req, res) => {
  const { itemId } = req.body;
  
  if (!itemId) {
    return res.status(400).json({ error: 'itemId –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' });
  }
  
  const item = monitoringRegistry.get(itemId);
  
  if (!item) {
    return res.status(404).json({ error: '–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω' });
  }
  
  // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π
  item.status = 'unavailable';
  item.unavailableSince = new Date().toISOString();
  monitoringRegistry.set(itemId, item);
  
  logger.info({ itemId }, 'TEST: Item marked as unavailable manually');
  
  res.json({
    message: '–¢–æ–≤–∞—Ä –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π',
    item: {
      id: item.id,
      status: item.status,
      unavailableSince: item.unavailableSince
    }
  });
}));
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```powershell
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
$items = Invoke-RestMethod -Uri "http://localhost:3000/monitoring/list" -Method GET

# –ü–æ–º–µ—Ç–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ç–æ–≤–∞—Ä –∫–∞–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π
$itemId = $items.items[0].id
Invoke-RestMethod -Uri "http://localhost:3000/monitoring/test-unavailable" -Method POST -Body (@{ itemId = $itemId } | ConvertTo-Json) -ContentType "application/json"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
Invoke-RestMethod -Uri "http://localhost:3000/monitoring/check-updates" -Method POST
```

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ PASS/FAIL

### ‚úÖ PASS (DoD –≤—ã–ø–æ–ª–Ω–µ–Ω)

**–ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
1. ‚úÖ –ü–ª–∞—à–∫–∞ "‚ö†Ô∏è –¢–æ–≤–∞—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
2. ‚úÖ –ü—Ä–∏—á–∏–Ω–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω–∞ ("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ")
3. ‚úÖ –¶–≤–µ—Ç –ø–ª–∞—à–∫–∏ –∫—Ä–∞—Å–Ω—ã–π (bg-red-900/30)
4. ‚úÖ –°—Ç–∞—Ç—É—Å –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±–Ω–æ–≤–ª—ë–Ω (`data-status="unavailable"`)
5. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
6. ‚úÖ –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç "Item marked as unavailable"
7. ‚úÖ –¢–æ–≤–∞—Ä –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º
8. ‚úÖ `item.unavailableSince` –∑–∞–ø–∏—Å–∞–Ω –≤ ISO-—Ñ–æ—Ä–º–∞—Ç–µ
9. ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ `unavailable` —Å –¥–µ—Ç–∞–ª—è–º–∏
10. ‚úÖ –ü–∞—Ä—Å–µ—Ä –Ω–µ –∫—Ä–∞—à–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ

---

### ‚ùå FAIL (DoD –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω)

**–•–æ—Ç—è –±—ã –æ–¥–∏–Ω –∏–∑ —Å–ª—É—á–∞–µ–≤:**

1. ‚ùå **–ü–ª–∞—à–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è**
   - –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ —É –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
   - `.monitoring-card-status` –ø—É—Å—Ç–æ–π

2. ‚ùå **–°—Ç–∞—Ç—É—Å –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω**
   - `data-status` –æ—Å—Ç–∞–ª—Å—è `"active"` –≤–º–µ—Å—Ç–æ `"unavailable"`

3. ‚ùå **–û—à–∏–±–∫–∞ –∫—Ä–∞—à–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
   - –°–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 Internal Server Error
   - –õ–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç Unhandled Exception

4. ‚ùå **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –ø–æ–∫–∞–∑–∞–Ω–∞**
   - –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –≤ —Å—Ç–∞—Ç—É—Å–µ

5. ‚ùå **–¢–æ–≤–∞—Ä –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è**
   - –ü–æ—Å–ª–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–ª–∞—à–∫–∞ –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç
   - –°—Ç–∞—Ç—É—Å –æ—Å—Ç–∞—ë—Ç—Å—è `"unavailable"`

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

- **Test 1.2: Empty Data** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–∞—Ä—Å–µ—Ä–∞
- **Test 3.2: Slow Internet** - —Ç–∞–π–º–∞—É—Ç 15 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **Test 4.1: Monitoring Test** - –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ü—Ä–∏—á–∏–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–¢–æ–≤–∞—Ä —É–¥–∞–ª—ë–Ω —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞**
   - –ü–∞—Ä—Å–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 Not Found
   - `freshData === null`

2. **–¢–æ–≤–∞—Ä –∑–∞–∫–æ–Ω—á–∏–ª—Å—è**
   - HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –µ—Å—Ç—å, –Ω–æ —Ü–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   - `freshData.price === null`

3. **–ò–∑–º–µ–Ω–∏–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML**
   - –ü–∞—Ä—Å–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä —Ü–µ–Ω—ã
   - `freshData.price === undefined`

4. **–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞**
   - –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞
   - –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### –ö–∞–∫ –æ—Ç–ª–∏—á–∏—Ç—å –ø—Ä–∏—á–∏–Ω—ã?

**–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**

```javascript
if (!freshData) {
  reason = '–¢–æ–≤–∞—Ä —É–¥–∞–ª—ë–Ω –∏–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (404)';
} else if (!freshData.price) {
  reason = '–¶–µ–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ (—Ç–æ–≤–∞—Ä –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –∏–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)';
}
```

---

## –®–∞–±–ª–æ–Ω –æ—Ç—á—ë—Ç–∞

```markdown
## Test 4.5: "–ñ–∏–≤–æ–π" –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)

–î–∞—Ç–∞: 8 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
–ú–µ—Ç–æ–¥: –†—É—á–Ω–æ–π —Ç–µ—Å—Ç (UI + –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞)

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
URL: https://www.ozon.ru/product/deleted-999
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ PASS
- –ü–ª–∞—à–∫–∞ –ø–æ—è–≤–∏–ª–∞—Å—å: ‚úÖ
- –ü—Ä–∏—á–∏–Ω–∞ —É–∫–∞–∑–∞–Ω–∞: ‚úÖ
- –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω: ‚úÖ
- –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: ‚úÖ WARN "Item marked as unavailable"

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–æ–≤–∞—Ä —Å—Ç–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
URL: https://www.wildberries.ru/catalog/12345678/detail.aspx ‚Üí –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ PASS
- –ü–ª–∞—à–∫–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: ‚úÖ
- `unavailableSince` –∑–∞–ø–∏—Å–∞–Ω: ‚úÖ "2025-10-08T12:30:00.000Z"

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–æ–≤–∞—Ä —Å–Ω–æ–≤–∞ —Å—Ç–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω
URL: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ PASS
- –ü–ª–∞—à–∫–∞ –∏—Å—á–µ–∑–ª–∞: ‚úÖ
- –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ "active": ‚úÖ
- –õ–æ–≥–∏: ‚úÖ INFO "Item became available again"

### –ò—Ç–æ–≥–æ:
DoD: ‚úÖ –í–´–ü–û–õ–ù–ï–ù (–ø–ª–∞—à–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
–í—Å–µ 3 —Å—Ü–µ–Ω–∞—Ä–∏—è: ‚úÖ PASS (100%)
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ä—É—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–î–∞—Ç–∞:** 8 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–¢–∏–ø:** –†—É—á–Ω–æ–π —Ç–µ—Å—Ç (—Ç—Ä–µ–±—É–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ UI)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –∫–æ–¥–µ (backend + frontend), –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –µ–≥–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.
