# TEST 4.4: Релевантность поиска - Быстрая инструкция

## DoD
**По запросу "рубашка мужская белая" в выдаче нет футболок**

## Быстрый тест (3 минуты)

### Шаг 1: Запустите сервер
```powershell
node server.js
```

### Шаг 2: Проверьте базовый запрос (DoD)

```powershell
# Запрос: рубашка мужская белая
$response = Invoke-RestMethod -Uri "http://localhost:3000/search?query=рубашка+мужская+белая&limit=10" -Method GET

# Вывести результаты
$response.results | ForEach-Object {
    Write-Host "✓ $($_.title) [$($_.category)]" -ForegroundColor Cyan
}

Write-Host "`nВсего результатов: $($response.results.Count)" -ForegroundColor Yellow
```

### Шаг 3: Проверьте чек-лист

| Критерий | Проверка | ✅/❌ |
|----------|----------|------|
| **1. Все товары — рубашки?** | Нет слов "футболка", "поло", "майка" | ☐ |
| **2. Все товары — мужские?** | Нет слов "женск", "детск" | ☐ |
| **3. Все товары — белые?** | Нет слов "чёрн", "син", "красн" | ☐ |
| **4. Категория корректна?** | Содержит "рубашк" или "мужск" | ☐ |

**Результат:**
- ✅ **PASS** — все 4 критерия выполнены (DoD достигнут)
- ❌ **FAIL** — хотя бы 1 критерий не выполнен

## Дополнительные тесты (опционально)

### Тест 2: Запрос с уточнением
```powershell
# Запрос: рубашка мужская белая slim fit
$response = Invoke-RestMethod -Uri "http://localhost:3000/search?query=рубашка+мужская+белая+slim+fit&limit=10" -Method GET
$response.results | Select-Object title, category
```

**Проверка:** Приоритет товарам со "slim fit" в названии

### Тест 3: Негативный тест
```powershell
# Запрос: автомобиль BMW
$response = Invoke-RestMethod -Uri "http://localhost:3000/search?query=автомобиль+BMW&limit=10" -Method GET
$response.results.Count
```

**Ожидаемое:** 0 товаров (пустой результат)

### Тест 4: Опечатка
```powershell
# Запрос: рубшака мужская (опечатка)
$response = Invoke-RestMethod -Uri "http://localhost:3000/search?query=рубшака+мужская&limit=10" -Method GET
$response.results.Count
```

**Оценка:**
- ✅ Нашлись рубашки = fuzzy search работает
- ❌ Ничего не найдено = нет обработки опечаток

## Автоматический помощник

Используйте скрипт для быстрой проверки:

```powershell
powershell -ExecutionPolicy Bypass -File scripts/test-search-manual.ps1
```

Скрипт покажет результаты и чек-лист для каждого сценария.

## Шкала оценки

| Оценка | Описание | DoD |
|--------|----------|-----|
| **10/10** | Все результаты 100% релевантны | ✅ PASS |
| **8-9/10** | 1-2 нерелевантных товара из 10 | ✅ PASS |
| **6-7/10** | 3-4 нерелевантных товара | ⚠️ ACCEPTABLE |
| **4-5/10** | Половина результатов нерелевантны | ❌ FAIL |
| **0-3/10** | Поиск не работает | ❌ FAIL |

## Примеры

### ✅ Хорошо
```
Результаты на "рубашка мужская белая":
1. Рубашка мужская белая классическая [Рубашки]
2. Мужская рубашка белая slim fit [Мужская одежда]
3. Рубашка для мужчин белая [Рубашки]

Оценка: 10/10 ✅ PASS
```

### ❌ Плохо
```
Результаты на "рубашка мужская белая":
1. Футболка мужская белая [Футболки] ❌
2. Рубашка женская белая [Женская одежда] ❌
3. Рубашка мужская чёрная [Рубашки] ❌

Оценка: 0/10 ❌ FAIL (DoD не выполнен)
```

## Что делать при FAIL?

1. **Проверьте базу данных:** Есть ли вообще белые мужские рубашки в `localCatalog`?
2. **Проверьте код:** Функция `searchLocalDataset()` в `server.js`
3. **Улучшите алгоритм:** Добавьте фильтрацию по атрибутам (цвет, пол)

## Полная документация

[TEST_4.4_SEARCH_RELEVANCE.md](TEST_4.4_SEARCH_RELEVANCE.md) — 7 сценариев, примеры улучшений, автоматизация

---

**Время теста:** ~3 минуты (базовый) / ~10 минут (полный)  
**Тип:** Ручной тест  
**Статус:** ✅ READY
