# ‚úÖ –¢–ï–°–¢ 5.1: –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê

**–î–∞—Ç–∞:** 9 –æ–∫—Ç—è–±—Ä—è 2025 –≥.  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~15 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

---

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –º–æ–¥—É–ª—å `fs`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `DB_FILE_PATH = './monitoring_db.json'`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadMonitoringData()` (–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `saveMonitoringData()` (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
–í—ã–∑–æ–≤—ã `saveMonitoringData()` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤:
- ‚úÖ POST `/monitoring/add` (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞)
- ‚úÖ POST `/monitoring/add` (–ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ POST `/monitoring/test-change` (—Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
- ‚úÖ POST `/monitoring/check-updates` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)
- ‚úÖ DELETE `/monitoring/:id` (—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞)

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –í—ã–∑–æ–≤ `loadMonitoringData()` –ø–µ—Ä–µ–¥ `app.listen()`
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ `Map` –∏–∑ –º–∞—Å—Å–∏–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ `monitoringIdSeq`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `TEST_5.1_PERSISTENT_STORAGE.md` (600+ —Å—Ç—Ä–æ–∫)
  - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
  - 5 —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤
  - –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ JSON
  - –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ (10 –ø—É–Ω–∫—Ç–æ–≤)
  - –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
  - –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
  - –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `README.md` (2 —Ä–∞–∑–¥–µ–ª–∞)

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (DoD)

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (3 –º–∏–Ω—É—Ç—ã):

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```powershell
   npm start
   ```
   
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** `http://localhost:3000`

3. **–î–æ–±–∞–≤—å—Ç–µ 2-3 —Ç–æ–≤–∞—Ä–∞:**
   - –í–∫–ª–∞–¥–∫–∞ "–ü–æ–∏—Å–∫" ‚Üí –∑–∞–ø—Ä–æ—Å "–Ω–∞—É—à–Ω–∏–∫–∏" (Ozon)
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥":**
   - –¢–æ–≤–∞—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

5. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   - –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: `Ctrl+C`

6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `C:\Marketlense\monitoring_db.json`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å–Ω–æ–≤–∞:**
   ```powershell
   npm start
   ```
   - –í –ª–æ–≥–∞—Ö: "–î–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞"

8. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É:**
   - `F5` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –í–∫–ª–∞–¥–∫–∞ "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥" ‚Üí –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –º–µ—Å—Ç–µ

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω!

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ `monitoring_db.json`

```json
{
  "items": [
    {
      "id": "1",
      "marketplace": "ozon",
      "productUrl": "https://...",
      "status": "active",
      "createdAt": "2025-10-09T...",
      "currentPrice": 3590,
      "currentTitle": "–ù–∞—É—à–Ω–∏–∫–∏...",
      "history": [...]
    }
  ],
  "nextId": 2,
  "lastUpdated": "2025-10-09T..."
}
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

### –¢–µ—Å—Ç—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:
```powershell
node -c server.js
# –í—ã–≤–æ–¥: (–ø—É—Å—Ç–æ) = OK
```

### –ù–µ—Ç –æ—à–∏–±–æ–∫ ESLint:
- ‚úÖ 0 –æ—à–∏–±–æ–∫
- ‚úÖ 0 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

---

## üìä –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (—Ñ–∞–π–ª–∞ –Ω–µ—Ç):
```
[INFO] –§–∞–π–ª –¥–∞–Ω–Ω—ã—Ö –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
[INFO] ‚úÖ AI –°–µ—Ä–≤–µ—Ä MarketLens v5.0 (—Å Gemini) –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
```

### –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ (—Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):
```
[INFO] –î–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ —Ñ–∞–π–ª–∞ { itemsCount: 3, nextId: 4 }
[INFO] ‚úÖ AI –°–µ—Ä–≤–µ—Ä MarketLens v5.0 (—Å Gemini) –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
```

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞:
```
[DEBUG] –î–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª { itemsCount: 1 }
[INFO] Initial price loaded { itemId: '1', price: 3590 }
[DEBUG] –î–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª { itemsCount: 1 }
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**DoD –≤—ã–ø–æ–ª–Ω–µ–Ω:** ‚úÖ  
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç:** ‚úÖ  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞:** ‚úÖ  
**–ì–æ—Ç–æ–≤–æ –∫ —Ä—É—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:** ‚úÖ

---

## üìã TODO –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä—É—á–Ω–æ–π —Ç–µ—Å—Ç –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ (3 –º–∏–Ω—É—Ç—ã)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ 5 —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤ –∏–∑ `TEST_5.1_PERSISTENT_STORAGE.md`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:
   - [ ] –¢–æ–≤–∞—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
   - [ ] –¢–æ–≤–∞—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è
   - [ ] –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - [ ] –°—Ç–∞—Ç—É—Å "unavailable" —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
   - [ ] –°—á—ë—Ç—á–∏–∫ ID —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ:
- –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ—Å—Ç—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å, –±—ç–∫–∞–ø—ã)
- –î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ SQLite/PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞

---

**–¢–µ—Å—Ç 5.1 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é!** üéâ

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `TEST_5.1_PERSISTENT_STORAGE.md`  
**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `server.js` (–¥–æ–±–∞–≤–ª–µ–Ω–æ ~60 —Å—Ç—Ä–æ–∫)
- `README.md` (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2 —Ä–∞–∑–¥–µ–ª–∞)
- `TEST_5.1_PERSISTENT_STORAGE.md` (—Å–æ–∑–¥–∞–Ω–æ)
- `TEST_5.1_COMPLETION.md` (—Å–æ–∑–¥–∞–Ω–æ)
