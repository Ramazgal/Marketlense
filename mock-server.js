// Mock Server Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ UI Ğ±ĞµĞ· Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ API
require('dotenv').config();
const express = require('express');

const app = express();
app.use(express.json());
app.use(express.static('.'));

console.log('ğŸ§ª Starting MOCK server for UI testing...');
console.log('AMVERA_API_KEY present:', !!process.env.AMVERA_API_KEY);

// Mock AI response Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°
app.post('/test-strategy', async (req, res) => {
  console.log('âœ… Received request:', JSON.stringify(req.body, null, 2));
  
  // Ğ˜Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¸ API (1-2 ÑĞµĞºÑƒĞ½Ğ´Ñ‹)
  await new Promise(resolve => setTimeout(resolve, 1500));
  
  // Mock Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ¾Ñ‚ GPT-4.1 (ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ JSON)
  const mockStrategy = {
    risks: [
      "ĞšĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ†ĞµĞ½Ğµ: Ğ²Ğ°ÑˆĞ° Ñ†ĞµĞ½Ğ° 2990â‚½ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²ÑƒĞ¼Ñ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ (2700â‚½ Ğ¸ 3500â‚½)",
      "ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ğ¾Ğ²: 50 Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ğ¾Ğ² Ğ·Ğ° Ğ¼ĞµÑÑÑ† Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¼Ğ°Ğ»Ğ¾ Ğ´Ğ»Ñ ÑƒĞºÑ€ĞµĞ¿Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ñ",
      "Ğ’Ñ‹ÑĞ¾ĞºĞ¸Ğ¹ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ: ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‚ Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ğ¿Ñ€Ğ¸ 4.8 Ğ·Ğ²Ñ‘Ğ·Ğ´Ğ°Ñ…",
      "Ğ Ğ¸ÑĞº Ñ†ĞµĞ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ¾Ğ¹Ğ½Ñ‹: ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚ B Ğ¿Ñ€Ğ¾Ğ´Ğ°Ñ‘Ñ‚ Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ, Ñ‡Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµÑ‡ÑŒ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğº Ñ†ĞµĞ½Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ĞµĞ¹"
    ],
    pricing: [
      "ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ²Ğ°ÑˆĞ° Ñ†ĞµĞ½Ğ° 2990â‚½ â€“ ÑÑ‚Ğ¾ Ğ·Ğ¾Ğ»Ğ¾Ñ‚Ğ°Ñ ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼ (3500â‚½) Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚ (2700â‚½)",
      "Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ: Ğ¿Ğ¾Ğ´Ñ‡ĞµÑ€ĞºĞ½Ğ¸Ñ‚Ğµ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ½Ğ°/ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ² Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°",
      "Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑĞºĞ¸Ğ´ĞºĞ¸: Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ°ĞºÑ†Ğ¸Ñ 2790â‚½ (-200â‚½) Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ° B",
      "ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ†ĞµĞ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ñ€Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ Ñ†ĞµĞ½Ñƒ 2999â‚½ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 2990â‚½ Ğ´Ğ»Ñ Ğ²Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ñ 'Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ 3000'"
    ],
    marketing: [
      "ĞĞºÑ†ĞµĞ½Ñ‚ Ğ½Ğ° Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ 4.8: ÑÑ‚Ğ¾ Ğ²Ğ°ÑˆĞµ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ğ¿Ñ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾ â€“ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°Ñ… Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑÑ…",
      "UGC-ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚: ÑÑ‚Ğ¸Ğ¼ÑƒĞ»Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ñ„Ğ¾Ñ‚Ğ¾/Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‹ Ñ Ğ±Ğ¾Ğ½ÑƒÑĞ°Ğ¼Ğ¸",
      "Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°: ÑĞ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ½Ñ„Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºÑƒ 'ĞœÑ‹ vs ĞšĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ñ‹' Ñ Ğ°ĞºÑ†ĞµĞ½Ñ‚Ğ¾Ğ¼ Ğ½Ğ° Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ Ğ¸ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‹",
      "Ğ¢Ğ°Ñ€Ğ³ĞµÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°: Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ Ğ½Ğ° Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ° B (Ğ±Ğ¾Ğ»ĞµĞµ Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ 4.2)",
      "ĞšÑ€Ğ¾ÑÑ-Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸: Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚Ğµ Ğ°ĞºÑĞµÑÑÑƒĞ°Ñ€Ñ‹ (Ñ‡ĞµÑ…Ğ»Ñ‹, ĞºĞ°Ğ±ĞµĞ»Ğ¸) Ğ´Ğ»Ñ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ ÑÑ€ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ñ‡ĞµĞºĞ°"
    ],
    todo: [
      "ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ğ·: Ğ¸Ğ·ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½ĞµĞ³Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‹ ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ¾Ğ² (Ñ‡Ñ‚Ğ¾ Ğ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑĞ¼)",
      "ğŸ“¸ ĞšĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚: Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° â€“ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ 5-7 ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ñ„Ğ¾Ñ‚Ğ¾ Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑƒĞ³Ğ»Ğ¾Ğ²",
      "ğŸ ĞĞºÑ†Ğ¸Ñ: Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ ÑĞºĞ¸Ğ´ĞºÑƒ Ğ´Ğ¾ 2790â‚½ Ğ½Ğ° 7 Ğ´Ğ½ĞµĞ¹ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ¿Ñ€Ğ¾ÑĞ°",
      "ğŸ’¬ ĞÑ‚Ğ·Ñ‹Ğ²Ñ‹: Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‹ Ñƒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ñ… 20 Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ĞµĞ¹ (email-Ñ€Ğ°ÑÑÑ‹Ğ»ĞºĞ° Ñ Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ¼ 100â‚½)",
      "ğŸ“ˆ SEO: Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ 'Ğ±ĞµÑĞ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ½Ğ°ÑƒÑˆĞ½Ğ¸ĞºĞ¸ Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğ¼ Ñ€ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³Ğ¾Ğ¼'",
      "ğŸ¯ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°: Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ñ€ĞµÑ‚Ğ°Ñ€Ğ³ĞµÑ‚Ğ¸Ğ½Ğ³ Ğ½Ğ° Ğ¿Ğ¾ÑĞµÑ‚Ğ¸Ñ‚ĞµĞ»ĞµĞ¹ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞµĞº ĞºĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ğ¾Ğ²",
      "ğŸ“¦ Ğ£Ğ¿Ğ°ĞºĞ¾Ğ²ĞºĞ°: Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ»Ğ°Ğ³Ğ¾Ğ´Ğ°Ñ€ÑÑ‚Ğ²ĞµĞ½Ğ½ÑƒÑ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ĞºÑƒ Ğ² Ğ¿Ğ¾ÑÑ‹Ğ»ĞºÑƒ Ñ QR-ĞºĞ¾Ğ´Ğ¾Ğ¼ Ğ½Ğ° Ğ¾Ñ‚Ğ·Ñ‹Ğ²"
    ]
  };
  
  console.log('âœ… Sending MOCK response (GPT-4.1 simulation)');
  res.json({ success: true, strategy: mockStrategy });
});

app.get('/health', (req, res) => {
  res.json({ status: 'ok', mode: 'MOCK' });
});

app.listen(3000, '0.0.0.0', () => {
  console.log('âœ… MOCK Test server running on port 3000');
  console.log('ğŸ“ This is a MOCK server - returns simulated AI responses');
  console.log('ğŸŒ Open: http://localhost:3000/test-ai.html');
});
